# Cursor Pro 自动化工具使用指南

## 目录

- [项目概述](#项目概述)
- [系统架构](#系统架构)
- [安装指南](#安装指南)
- [配置说明](#配置说明)
- [使用教程](#使用教程)
- [常见问题](#常见问题)
- [高级功能](#高级功能)
- [安全注意事项](#安全注意事项)

## 项目概述

Cursor Pro 自动化工具是一个用于自动化 Cursor IDE 账号注册和令牌刷新的开源项目。该工具能够帮助用户自动完成以下操作：

- 自动注册 Cursor 账号
- 自动处理邮箱验证码
- 自动重置机器码
- 更新认证信息

本项目仅用于学习和研究目的，旨在深入理解浏览器自动化和验证码处理技术。

## 系统架构

### 核心组件

项目由以下核心组件构成：

1. **主程序 (cursor_pro_keep_alive.py)**
   - 控制整体流程
   - 处理用户界面交互
   - 协调各模块工作

2. **邮箱验证模块 (get_email_code.py)**
   - 支持IMAP和POP3邮箱验证方式
   - 自动获取验证码
   - 处理邮件清理

3. **浏览器管理模块 (browser_utils.py)**
   - 初始化和配置浏览器
   - 管理浏览器会话
   - 支持代理设置

4. **认证管理模块 (cursor_auth_manager.py)**
   - 更新Cursor认证信息
   - 适配不同操作系统

5. **机器码重置模块 (reset_machine.py)**
   - 重置Cursor机器标识
   - 生成新的唯一ID

6. **配置管理模块 (config.py)**
   - 加载环境变量
   - 验证配置有效性
   - 提供配置访问接口

### 数据流程

1. 用户启动程序 → 选择操作模式
2. 如选择完整注册流程：
   - 初始化浏览器 → 生成随机账号 → 访问注册页面
   - 填写表单 → 处理验证码 → 获取邮箱验证码 → 完成注册
   - 获取会话令牌 → 更新认证信息 → 重置机器码
3. 如选择仅重置机器码：
   - 直接执行机器码重置操作

## 安装指南

### 环境要求

- Python 3.8 或更高版本
- Google Chrome 浏览器
- 支持 Windows、macOS 和 Linux

### 安装步骤

1. **克隆或下载项目**

```bash
git clone https://github.com/chengazhen/cursor-auto-free.git
cd cursor-auto-free
```

2. **安装依赖**

```bash
pip install -r requirements.txt
```

3. **配置环境变量**

复制 `.env.example` 文件为 `.env`，并按照[配置说明](#配置说明)部分进行设置。

```bash
cp .env.example .env
```

4. **运行程序**

```bash
python cursor_pro_keep_alive.py
```

### 使用已编译版本

您也可以从项目的 Releases 页面下载预编译版本，无需安装 Python 环境。

## 配置说明

配置文件 `.env` 包含以下重要参数：

### 基础配置

```
DOMAIN='你的域名'  # Cloudflare 域名或其他邮箱域名
```

### IMAP 邮箱配置

设置 `TEMP_MAIL=null` 以启用 IMAP 模式：

```
DOMAIN='wozhangsan.me'  # 你的域名
TEMP_MAIL=null  # 必须设为null以启用IMAP模式

# IMAP服务器配置
IMAP_SERVER=imap.服务器地址  # 例如：imap.gmail.com
IMAP_PORT=服务器端口         # 通常为 993
IMAP_USER=邮箱地址           # 完整邮箱地址
IMAP_PASS=授权码             # 邮箱授权码（非登录密码）
IMAP_DIR=邮箱文件夹          # [可选] 默认为收件箱(inbox)
IMAP_PROTOCOL=IMAP          # 指定使用 IMAP 或 POP3 协议
```

### 浏览器配置

```
# 无头模式 (默认开启)
BROWSER_HEADLESS='True'

# 自定义浏览器路径
BROWSER_PATH='浏览器可执行文件路径'

# 代理配置
BROWSER_PROXY='http://user:pass@host:port'
```

## 使用教程

### 基本操作流程

1. 启动程序后，会显示以下选项：
   ```
   请选择操作模式:
   0. 退出程序
   1. 仅重置机器码
   2. 传统注册流程（直接修改数据库）
   ```

2. **仅重置机器码模式**：
   - 选择选项 1
   - 程序将自动检测Cursor版本并执行适当的重置操作
   - 成功后显示新的机器ID

3. **完整注册流程**：
   - 选择选项 2
   - 程序将自动初始化浏览器、生成随机账号
   - 自动完成注册、验证、获取令牌和重置机器码等操作
   - 成功后将显示注册的账号信息

### 注册流程详解

1. **初始化阶段**
   - 检查系统环境和Cursor版本
   - 初始化浏览器会话
   - 生成随机用户信息和邮箱

## 常见问题

### 验证码获取失败

**问题**: 程序无法获取邮箱验证码。

**解决方案**:
1. 检查邮箱配置是否正确
2. 检查网络连接是否稳定
3. 增加重试次数和间隔
4. 确保IMAP/POP3服务已在邮箱设置中启用

### 浏览器启动失败

**问题**: 程序无法启动或控制浏览器。

**解决方案**:
1. 确保已安装Chrome浏览器
2. 尝试设置`BROWSER_HEADLESS='False'`查看具体问题
3. 检查是否有其他进程占用了浏览器
4. 尝试指定具体的浏览器路径

### 机器码重置失败

**问题**: 无法成功重置机器码。

**解决方案**:
1. 确保Cursor未在运行中
2. 检查Cursor配置文件的权限
3. 对于0.45以上版本，使用适当的重置方法
4. 以管理员权限运行程序

## 高级功能

### 自定义邮箱域名

您可以通过设置自己的Cloudflare Workers来自定义邮箱域名，使验证邮件转发到您的真实邮箱。

### 代理配置

对于网络受限的环境，可以配置代理服务器：

```
BROWSER_PROXY='http://user:pass@host:port'
```

### 批量操作

通过修改源代码中的循环逻辑，可以实现批量注册和管理账号的功能。

## 安全注意事项

1. **账号安全**
   - 不要将生成的账号信息公开分享
   - 定期更改密码增强安全性

2. **数据保护**
   - 避免在公共环境运行程序
   - 不要将包含敏感信息的配置文件上传到公共仓库

3. **合规使用**
   - 遵守Cursor的服务条款
   - 仅用于学习和个人使用，不得用于商业目的

---

**免责声明**: 本项目仅供学习和研究目的，使用者需自行承担使用风险和法律责任。 