# Cursor Pro 自动化工具流程图

## 系统组件关系图

```
┌─────────────────────────────────┐
│         cursor_pro_keep_alive.py│
│            (主程序)             │
└───────────────┬─────────────────┘
                │
    ┌───────────┼───────────┬──────────────┬───────────────┐
    │           │           │              │               │
    ▼           ▼           ▼              ▼               ▼
┌─────────┐ ┌─────────┐ ┌──────────┐ ┌──────────┐  ┌─────────────┐
│config.py│ │logger.py│ │browser_  │ │get_email_│  │cursor_auth_ │
│(配置管理)│ │(日志系统)│ │utils.py  │ │code.py   │  │manager.py   │
└─────────┘ └─────────┘ │(浏览器管理)│ │(邮箱验证) │  │(认证管理)   │
                         └──────────┘ └──────────┘  └─────────────┘
                              │            │               │
                              │            │               │
                              ▼            │               │
                        ┌──────────┐       │               │
                        │turnstile │       │               │
                        │Patch/    │       │               │
                        │(验证插件) │       │               │
                        └──────────┘       │               │
                                           │               │
                                           ▼               ▼
                                      ┌──────────┐  ┌─────────────┐
                                      │reset_    │  │patch_cursor_│
                                      │machine.py│  │get_machine_ │
                                      │(重置机器码)│  │id.py        │
                                      └──────────┘  │(机器码补丁)  │
                                                    └─────────────┘
```

## 注册流程图

```
┌─────────────────┐
│    开始程序     │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  选择操作模式   │
└────────┬────────┘
         │
         ├───────────────┐
         │               │
         ▼               ▼
┌─────────────────┐ ┌────────────────┐
│ 1.仅重置机器码  │ │ 2.完整注册流程 │
└────────┬────────┘ └───────┬────────┘
         │                   │
         │                   ▼
         │          ┌─────────────────┐
         │          │ 初始化浏览器    │
         │          └────────┬────────┘
         │                   │
         │                   ▼
         │          ┌─────────────────┐
         │          │ 生成随机账号    │
         │          └────────┬────────┘
         │                   │
         │                   ▼
         │          ┌─────────────────┐
         │          │ 访问注册页面    │
         │          └────────┬────────┘
         │                   │
         │                   ▼
         │          ┌─────────────────┐
         │          │ 填写个人信息    │
         │          └────────┬────────┘
         │                   │
         │                   ▼
         │          ┌─────────────────┐
         │          │ 处理Turnstile   │
         │          │ 验证(如有)      │
         │          └────────┬────────┘
         │                   │
         │                   ▼
         │          ┌─────────────────┐
         │          │ 设置密码        │
         │          └────────┬────────┘
         │                   │
         │                   ▼
         │          ┌─────────────────┐
         │          │ 获取验证码      │◄─────┐
         │          └────────┬────────┘      │
         │                   │               │
         │                   │               │
         │                   ▼               │
         │          ┌─────────────────┐      │
         │          │ 验证码是否获取  │      │
         │          │ 成功？          │──否──┘
         │          └────────┬────────┘
         │                   │是
         │                   │
         │                   ▼
         │          ┌─────────────────┐
         │          │ 输入验证码      │
         │          └────────┬────────┘
         │                   │
         │                   ▼
         │          ┌─────────────────┐
         │          │ 获取会话令牌    │
         │          └────────┬────────┘
         │                   │
         │                   ▼
         │          ┌─────────────────┐
         │          │ 更新认证信息    │
         │          └────────┬────────┘
         │                   │
         ▼                   ▼
┌─────────────────┐ ┌─────────────────┐
│ 重置机器码      │ │ 重置机器码      │
└────────┬────────┘ └────────┬────────┘
         │                   │
         ▼                   ▼
┌─────────────────┐ ┌─────────────────┐
│ 显示新机器码    │ │ 显示账号信息    │
└────────┬────────┘ └────────┬────────┘
         │                   │
         ▼                   ▼
┌─────────────────┐ ┌─────────────────┐
│    结束程序     │ │    结束程序     │
└─────────────────┘ └─────────────────┘
```

## 邮箱验证流程图

```
┌─────────────────┐
│  开始邮箱验证   │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  检查协议类型   │
└────────┬────────┘
         │
         ├───────────────┐
         │               │
         ▼               ▼
┌─────────────────┐ ┌────────────────┐
│ IMAP协议        │ │ POP3协议       │
└────────┬────────┘ └───────┬────────┘
         │                   │
         ▼                   ▼
┌─────────────────┐ ┌────────────────┐
│连接IMAP服务器   │ │连接POP3服务器  │
└────────┬────────┘ └───────┬────────┘
         │                   │
         ▼                   ▼
┌─────────────────┐ ┌────────────────┐
│ 搜索目标邮件    │ │获取最新邮件    │
└────────┬────────┘ └───────┬────────┘
         │                   │
         ▼                   ▼
┌─────────────────┐ ┌────────────────┐
│ 读取邮件内容    │ │读取邮件内容    │
└────────┬────────┘ └───────┬────────┘
         │                   │
         ▼                   ▼
┌─────────────────┐ ┌────────────────┐
│ 提取验证码      │ │提取验证码      │
└────────┬────────┘ └───────┬────────┘
         │                   │
         ▼                   ▼
┌─────────────────┐ ┌────────────────┐
│ 删除已读邮件    │ │标记并删除邮件  │
└────────┬────────┘ └───────┬────────┘
         │                   │
         └────────────────────────┘
                     │
                     ▼
             ┌─────────────────┐
             │ 返回验证码      │
             └─────────────────┘
```

## 机器码重置流程图

```
┌─────────────────┐
│ 开始重置机器码  │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│检查Cursor版本   │
└────────┬────────┘
         │
         ├───────────────┐
         │               │
         ▼               ▼
┌─────────────────┐ ┌────────────────┐
│ 版本 ≥ 0.45     │ │ 版本 < 0.45    │
└────────┬────────┘ └───────┬────────┘
         │                   │
         ▼                   ▼
┌─────────────────┐ ┌────────────────┐
│使用go_cursor_help│ │使用直接重置方法│
│(补丁方式)        │ │(修改配置文件)  │
└────────┬────────┘ └───────┬────────┘
         │                   │
         ▼                   ▼
┌─────────────────┐ ┌────────────────┐
│生成新的机器ID   │ │生成新的机器ID  │
└────────┬────────┘ └───────┬────────┘
         │                   │
         ▼                   ▼
┌─────────────────┐ ┌────────────────┐
│更新配置文件     │ │更新配置文件    │
└────────┬────────┘ └───────┬────────┘
         │                   │
         └────────────────────────┘
                     │
                     ▼
             ┌─────────────────┐
             │ 重置完成        │
             └─────────────────┘
``` 